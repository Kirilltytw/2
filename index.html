<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–≤–º–µ—Å—Ç–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div class="container">
        <h1>–°–æ–≤–º–µ—Å—Ç–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</h1>
        
        <div id="connection-status" class="status-disconnected">
            <span id="status-icon">üî¥</span>
            <span id="status-text">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
        </div>
        
        <iframe id="video-frame" allowfullscreen></iframe>
        
        <div class="controls">
            <input type="text" id="video-url" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ (VK/Rutube)">
            <button id="load-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            <button id="play-btn" disabled>‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏</button>
            <button id="pause-btn" disabled>‚è∏Ô∏è –ü–∞—É–∑–∞</button>
            <button id="sync-btn" disabled>üîÅ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        
        <div id="video-status">–í–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</div>
        
        <div id="chat-messages"></div>
        <div class="chat-controls">
            <input type="text" id="chat-input" placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" disabled>
            <button id="send-btn" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
        
        <div class="invite-section">
            <p>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π:</p>
            <input type="text" id="room-url" readonly>
            <button id="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="assets/js/script.js"></script>
    
    <script>
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç iframe
    window.addEventListener('message', function(event) {
        try {
            if (typeof event.data === 'object' && event.data.currentTime !== undefined) {
                window.videoCurrentTime = event.data.currentTime;
            }
        } catch (e) {
            console.log('Message error:', e);
        }
    });
    </script>
</body>
</html>
